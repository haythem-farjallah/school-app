# -----------------------------------------------------
# LOKI LOGGING CONFIGURATION
# -----------------------------------------------------
# Enable Loki logging for this profile
loki.enabled=true

# Loki endpoint configuration
loki.url=http://loki:3100/loki/api/v1/push

# Logging configuration for Loki
logging.level.com.github.loki4j=INFO
logging.level.com.example.school_management=DEBUG

# Loki appender configuration
logging.appenders.loki.type=com.github.loki4j.logback.Loki4jAppender
logging.appenders.loki.url=${loki.url}
logging.appenders.loki.connectionTimeout=5000
logging.appenders.loki.requestTimeout=10000
logging.appenders.loki.retryOnError=true
logging.appenders.loki.retryOnErrorMaxAttempts=3
logging.appenders.loki.retryOnErrorDelay=1000

# Loki labels configuration
logging.appenders.loki.labels.application=${spring.application.name}
logging.appenders.loki.labels.environment=development
logging.appenders.loki.labels.level=%level
logging.appenders.loki.labels.logger=%logger{36}

# Loki format configuration
logging.appenders.loki.format.type=com.github.loki4j.logback.JsonEncoder
logging.appenders.loki.format.includeContextData=true
logging.appenders.loki.format.includeMdc=true

# Add Loki appender to root logger
logging.root.appenders=console,loki

# Enable debug logging for better troubleshooting
logging.level.root=INFO
logging.level.com.example.school_management=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG

# -----------------------------------------------------
# DISTRIBUTED TRACING (TEMPO) CONFIGURATION
# -----------------------------------------------------
# Enable distributed tracing for Tempo
management.tracing.enabled=true
management.tracing.sampling.probability=1.0

# Enable OpenTelemetry configuration
management.otlp.tracing.enabled=true
management.otlp.tracing.endpoint=http://tempo:4318/v1/traces

# Enable Micrometer tracing configuration
management.tracing.exporters=otlp
